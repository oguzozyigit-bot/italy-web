<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>italkyAI - Future Home</title>
  <style>
    :root {
      --accent-neon: #6366f1;
      --accent-bordo: #801336;
      --glass-ultra: rgba(255, 255, 255, 0.03);
      --border-light: rgba(255, 255, 255, 0.1);
    }

    #pageContent {
      height: 100%;
      display: flex;
      flex-direction: column;
      gap: 18px;
      padding-bottom: 10px;
    }

    /* --- HERO PORTAL (FaceToFace) --- */
    .hero-portal {
      position: relative;
      background: linear-gradient(135deg, #1e050e 0%, #801336 100%);
      border-radius: 35px;
      padding: 30px 24px;
      height: 220px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 25px 50px -12px rgba(128, 19, 54, 0.5);
      overflow: hidden;
      cursor: pointer;
    }

    /* Uzay efekti için arka plan animasyonu */
    .hero-portal::before {
      content: ""; position: absolute; inset: 0;
      background: radial-gradient(circle at 70% 20%, rgba(99, 102, 241, 0.2) 0%, transparent 60%);
      animation: pulseOrbit 8s infinite alternate;
    }

    .hero-icon-lg {
      position: absolute; top: 20px; right: 20px;
      width: 80px; height: 80px;
      background: linear-gradient(135deg, #22d3ee, #3b82f6);
      border-radius: 25px;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 0 30px rgba(34, 211, 238, 0.3);
    }
    .hero-icon-lg svg { width: 40px; height: 40px; stroke: #fff; fill: none; stroke-width: 2; }

    .hero-title { font-size: 32px; font-weight: 900; letter-spacing: -1px; }
    .hero-desc { font-size: 14px; opacity: 0.7; font-weight: 600; margin-bottom: 5px; }

    /* --- ACADEMY (Elegant Minimal) --- */
    .academy-row {
      background: var(--glass-ultra);
      border: 1px solid var(--border-light);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 18px 24px;
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
    }
    .academy-icon {
      width: 48px; height: 48px;
      background: linear-gradient(135deg, #2dd4bf, #10b981);
      border-radius: 15px;
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0;
    }
    .academy-icon svg { width: 22px; height: 22px; stroke: #fff; fill: none; stroke-width: 2.5; }
    .academy-text h3 { margin: 0; font-size: 17px; font-weight: 800; }
    .academy-text p { margin: 0; font-size: 11px; opacity: 0.5; font-weight: 700; }

    /* --- GRID AREA --- */
    .smart-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }

    .smart-card {
      background: var(--glass-ultra);
      border: 1px solid var(--border-light);
      border-radius: 28px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.2, 1, 0.3, 1);
      position: relative;
    }
    .smart-card:active { transform: scale(0.95); background: rgba(255,255,255,0.08); }

    .neon-wrap {
      width: 50px; height: 50px;
      border-radius: 16px;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    .neon-wrap svg { width: 24px; height: 24px; stroke: #fff; fill: none; stroke-width: 2.2; }

    /* İkon Renkleri (Senin Home.html'den) */
    .c-text .neon-wrap { background: linear-gradient(135deg, #34d399, #22c55e); }
    .c-photo .neon-wrap { background: linear-gradient(135deg, #a78bfa, #60a5fa); }
    .c-doc .neon-wrap { background: linear-gradient(135deg, #fda4af, #fb7185); }
    .c-game .neon-wrap { background: linear-gradient(135deg, #fde047, #f59e0b); }

    .smart-card h4 { margin: 0; font-size: 15px; font-weight: 900; }
    .smart-card span { font-size: 10px; opacity: 0.4; font-weight: 700; }

    /* Dinamik Durumlar */
    .locked { opacity: 0.3; filter: grayscale(1); pointer-events: none; }
    .lock-label { position: absolute; top: 15px; right: 20px; font-size: 8px; font-weight: 900; color: #fb7185; }

    @keyframes pulseOrbit {
      from { transform: scale(1) translate(0, 0); }
      to { transform: scale(1.2) translate(-5%, 5%); }
    }
  </style>
</head>

<body>
  <div id="pageContent">
    
    <div class="hero-portal" id="btnFfStart" data-href="/pages/facetoface.html">
      <div class="hero-icon-lg">
        <svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
      </div>
      <div class="hero-info">
        <div class="hero-desc">YAPAY ZEKA İLE CANLI</div>
        <div class="hero-title">FaceToFace</div>
      </div>
    </div>

    <div class="academy-row" id="btnAcademy" data-href="/pages/teacher_select.html">
      <div class="academy-icon">
        <svg viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/></svg>
      </div>
      <div class="academy-text">
        <h3>italky Academy</h3>
        <p>EĞİTMENLERLE GELECEĞİ KONUŞ</p>
      </div>
    </div>

    <div class="smart-grid">
      
      <div class="smart-card c-text" id="tileText" data-href="/pages/text_translate.html">
        <div class="neon-wrap"><svg viewBox="0 0 24 24"><path d="M4 7h16M4 12h16M4 17h10"/></svg></div>
        <div class="card-info">
          <h4>Metin</h4>
          <span>SMART ENGINE</span>
        </div>
        <div class="lock-label" id="lockText"></div>
      </div>

      <div class="smart-card c-photo" id="tilePhoto" data-href="/pages/photo.html">
        <div class="neon-wrap"><svg viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg></div>
        <div class="card-info">
          <h4>Görsel</h4>
          <span>VISION AI</span>
        </div>
        <div class="lock-label" id="lockPhoto"></div>
      </div>

      <div class="smart-card c-doc" id="tileDoc" data-href="/pages/document.html">
        <div class="neon-wrap"><svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></div>
        <div class="card-info">
          <h4>Belge</h4>
          <span>ANALYSIS</span>
        </div>
        <div class="lock-label" id="lockDoc"></div>
      </div>

      <div class="smart-card c-game" id="tileGame" data-href="/pages/game.html">
        <div class="neon-wrap"><svg viewBox="0 0 24 24"><rect x="2" y="6" width="20" height="12" rx="2"/><path d="M6 12h4M8 10v4"/><circle cx="15" cy="11" r="1"/></svg></div>
        <div class="card-info">
          <h4>Oyun</h4>
          <span>DAILY QUEST</span>
        </div>
        <div class="lock-label" id="lockGame"></div>
      </div>

    </div>
  </div>

  <script type="module">
    import { mountShell, setHeaderTokens } from "/js/ui_shell.js";
    import { bootPage } from "/js/ui_guard.js";
    import { ensureAuthAndCacheUser } from "/js/auth.js";

    mountShell({ scroll:"none" });

    const cached = await ensureAuthAndCacheUser();
    if (cached?.tokens != null) setHeaderTokens(cached.tokens);
    bootPage({ protectedPage:true, header:{ nameId:"userName", picId:"userPic" } });

    function checkStates() {
      const isOnline = navigator.onLine;
      const user = JSON.parse(localStorage.getItem('italky_user_v1') || '{}');
      const hasOff = (user.offline_langs || []).length > 0;
      const hasGames = localStorage.getItem('italky_lang_pool_ready') === "1";

      const config = {
        tileText: { ok: isOnline || hasOff, msg: "LOCAL" },
        tilePhoto: { ok: isOnline, msg: "ONLINE" },
        tileDoc: { ok: isOnline, msg: "ONLINE" },
        tileGame: { ok: isOnline || hasGames, msg: "OFFLINE" }
      };

      Object.entries(config).forEach(([id, cfg]) => {
        const el = document.getElementById(id);
        const lock = el.querySelector('.lock-label');
        if(!cfg.ok) {
          el.classList.add('locked');
          lock.innerText = "KILITLI";
        } else {
          el.classList.remove('locked');
          lock.innerText = cfg.msg;
        }
      });
    }

    document.querySelectorAll("[data-href]").forEach(btn => {
      btn.onclick = () => { if(!btn.classList.contains('locked')) location.href = btn.dataset.href; };
    });

    checkStates();
  </script>
</body>
</html>
