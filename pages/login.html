<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>italkyAI • Pro-Elite 3000</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-void: #02000f;
      --brand-grad: linear-gradient(135deg, #a5b4fc 0%, #6366f1 50%, #ec4899 100%);
      --signature-grad: linear-gradient(to right, #fff, #6366f1, #fff);
      --accent: #6366f1;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
    
    body {
      background-color: var(--bg-void);
      color: #fff;
      font-family: 'Outfit', sans-serif;
      height: 100dvh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      align-items: center;
    }

    /* Arka Plan */
    .nebula {
      position: fixed; inset: 0;
      background: radial-gradient(circle at 50% 50%, rgba(30, 0, 60, 1) 0%, #02000f 100%);
      z-index: 0;
    }

    .main {
      flex: 1; display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      padding: 0 30px; z-index: 10; width: 100%; margin-top: -30px;
    }

    /* 1. ÜST LOGO */
    .brand-section { text-align: center; margin-bottom: 10px; }
    .brand-section h1 { font-size: 72px; font-weight: 800; letter-spacing: -4px; line-height: 1; }
    .brand-section h1 span.ai {
      background: var(--brand-grad);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

    /* 2. DÖNEN GERÇEK DÜNYA */
    .world-container {
      position: relative; width: 280px; height: 280px;
      display: flex; align-items: center; justify-content: center;
    }
    .earth {
      width: 200px; height: 200px; border-radius: 50%;
      background: url('https://upload.wikimedia.org/wikipedia/commons/2/22/Earth_Western_Hemisphere_transparent_background.png');
      background-size: 210% 100%;
      box-shadow: inset -15px -15px 40px #000, 0 0 50px rgba(99, 102, 241, 0.3);
      animation: rotateWorld 25s linear infinite;
    }
    .earth-light {
      position: absolute; width: 240px; height: 240px; border-radius: 50%;
      background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
      animation: breathe 4s infinite alternate ease-in-out;
    }
    @keyframes rotateWorld { from { background-position: 0 0; } to { background-position: 420px 0; } }
    @keyframes breathe { from { transform: scale(1); opacity: 0.4; } to { transform: scale(1.1); opacity: 0.7; } }

    /* 3. DAKTİLO YAZISI */
    .typewriter-container { height: 40px; margin-top: 10px; margin-bottom: 25px; display: flex; justify-content: center; }
    .typewriter {
      font-family: 'JetBrains Mono', monospace; font-size: 15px; color: #94a3b8;
      border-right: 2px solid var(--accent); white-space: nowrap; overflow: hidden; width: 0;
      animation: typing 4s steps(50, end) infinite, blink .75s step-end infinite;
    }
    @keyframes typing { 0%, 10% { width: 0 } 70%, 90% { width: 100% } 100% { width: 0 } }
    @keyframes blink { from, to { border-color: transparent } 50% { border-color: var(--accent) } }

    /* 4. GOOGLE BUTONU */
    .login-box { width: 100%; max-width: 320px; margin-bottom: 25px; z-index: 20; }
    .google-btn {
      width: 100%; height: 62px; background: #fff; color: #000;
      border: none; border-radius: 40px; font-size: 16px; font-weight: 800;
      display:flex; align-items:center; justify-content:center; gap:14px;
      cursor:pointer; box-shadow: 0 15px 35px rgba(0,0,0,0.4); 
      transition: 0.2s; position: relative;
    }
    .google-btn:active { transform: scale(0.97); }
    .g-icon { width: 24px; height: 24px; pointer-events: none; }

    /* 5. FOOTER & İMZA & LINKLER */
    footer { width: 100%; padding-bottom: 30px; text-align: center; z-index: 20; }
    
    .footer-nav { display: flex; justify-content: center; gap: 20px; margin-bottom: 12px; }
    .footer-nav a { text-decoration: none; color: rgba(255,255,255,0.4); font-size: 11px; font-weight: 700; text-transform: uppercase; }
    
    .academy-title { font-size: 22px; font-weight: 800; letter-spacing: 6px; margin-bottom: 8px; }
    .academy-title b { font-weight: 800; text-transform: lowercase; color: #fff; }
    .academy-title span { background: var(--brand-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-transform: uppercase; }

    .prestige-signature {
      font-size: 12px; font-weight: 900; letter-spacing: 1.5px;
      background: var(--signature-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      opacity: 0.8;
    }
    
    #toast {
      position: fixed; top: 18px; left: 50%; transform: translateX(-50%) translateY(-120px);
      background: rgba(10, 10, 18, 0.95); border: 1px solid var(--accent);
      padding: 12px 24px; border-radius: 99px; color: #fff; z-index: 9999;
      font-weight: 700; transition: 0.3s;
    }
    #toast.show { transform: translateX(-50%) translateY(0); }
  </style>
</head>

<body>
  <div class="nebula"></div>

  <div class="main">
    <div class="brand-section">
      <h1>italky<span class="ai">AI</span></h1>
    </div>

    <div class="world-container">
      <div class="earth-light"></div>
      <div class="earth"></div>
    </div>

    <div class="typewriter-container">
      <div class="typewriter" id="typewriter">Bağlanılıyor...</div>
    </div>

    <div class="login-box">
      <button class="google-btn" id="googleBtn" type="button">
        <svg class="g-icon" viewBox="0 0 24 24">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        <span>google ile devam et</span>
      </button>
    </div>
  </div>

  <footer>
    <div class="footer-nav">
      <a href="/pages/about.html">Hakkımızda</a>
      <a href="/pages/faq.html">SSS</a>
      <a href="/pages/privacy.html">Gizlilik</a>
      <a href="/pages/contact.html">İletişim</a>
    </div>

    <div class="academy-title"><b>italky</b><span>ACADEMY</span></div>
    
    <div class="prestige-signature">italkyAI @ italkyAcademy By Ozyigit's 2026</div>
  </footer>

  <div id="toast"></div>

  <script type="module">
    import { supabase } from "/js/supabase_client.js";
    import { ensureAuthAndCacheUser, loginWithGoogle } from "/js/auth.js";

    const toastEl = document.getElementById("toast");
    const HOME = "/pages/home.html";
    const STORAGE_KEY = "italky_user_v1";

    function toast(msg){
      if(!toastEl) return;
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      setTimeout(()=>toastEl.classList.remove("show"), 2200);
    }

    // --- NATIVE BRIDGE (SENİN MOTORUN) ---
    window.onNativeLoginSuccess = async function(jsonResponse) {
      try {
        const data = typeof jsonResponse === "string" ? JSON.parse(jsonResponse) : jsonResponse;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data.user));
        localStorage.setItem("italky_token", data.token); 
        toast("Hoş geldin " + data.user.full_name + "!");
        setTimeout(() => location.replace(HOME), 800);
      } catch (e) {
        toast("Giriş işlenirken hata oluştu.");
      }
    };

    function isInApk(){
      return !!(window.Native && typeof window.Native.startGoogleLogin === "function");
    }

    async function handleGoogleClick(){
      if(isInApk()){
        toast("Güvenli giriş başlatılıyor...");
        window.Native.startGoogleLogin(); 
      } else {
        toast("Google yönlendiriliyor...");
        await loginWithGoogle(); 
      }
    }

    // --- DAKTİLO YAZILARI (20 ADET) ---
    const phrases = [
      "Dünyayı sizin için küçülttük.", "Dil bariyerlerini aştık.", "Sınırları kaldırdık.",
      "italkyAI ile özgürleşin.", "Yapay zeka asistanın aktif.", "Offline çeviri aktif.",
      "Geleceğe hoş geldiniz.", "7/24 kesintisiz tercüme.", "Anında yüz yüze iletişim.",
      "Kendi dilinde dünyayı keşfet.", "İletişimin yeni boyutuna geç.", "Zamanı ve mekânı aşıyoruz.",
      "Kültürler arası köprü kuruyoruz.", "Sesi yazıya, yazıyı sese dönüştür.", "En akıllı dil asistanın burada.",
      "Profesyonel akademi deneyimi.", "Her dilde aynı samimiyet.", "italkyAI: Konuşmaya başla.",
      "Dünya artık çok daha yakın.", "Dil öğrenme devri bitti."
    ];
    let i = 0;
    const typewriterEl = document.getElementById("typewriter");

    setInterval(() => {
      i = (i + 1) % phrases.length;
      typewriterEl.style.animation = 'none';
      typewriterEl.offsetHeight; 
      typewriterEl.textContent = phrases[i];
      typewriterEl.style.animation = null;
    }, 4000);

    // Event Listener
    document.getElementById("googleBtn")?.addEventListener("click", handleGoogleClick);

    // Oturum Kontrolü
    if(localStorage.getItem(STORAGE_KEY)){
      location.replace(HOME);
    }
  </script>
</body>
</html>
